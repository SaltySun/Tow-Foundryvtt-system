{{!-- Structure/Plot Sheet Template --}}
<form class="structure-sheet-form">
  <header class="sheet-header">
    <div class="header-fields">
      <h1 class="charname">
        <input name="name" type="text" value="{{actor.name}}" placeholder="{{localize 'battlefield-system.Sheet.Structure.Name'}}" />
      </h1>
      <div class="structure-type">
        <label>{{localize 'battlefield-system.Sheet.Structure.StructureType'}}:</label>
        <span>{{fullType}}</span>
      </div>
    </div>
  </header>

  <nav class="sheet-tabs tabs" data-group="primary">
    <a class="item" data-tab="main">{{localize 'battlefield-system.Tabs.Main'}}</a>
    <a class="item" data-tab="details">{{localize 'battlefield-system.Sheet.Structure.Description'}}</a>
    <a class="item" data-tab="status">{{localize 'battlefield-system.Sheet.Structure.StatusEffects'}}</a>
  </nav>

  <section class="sheet-body">
    {{!-- Main Tab --}}
    <div class="tab" data-tab="main">
      <div class="grid grid-2col">
        <div class="form-group">
          <label>{{localize 'battlefield-system.Sheet.Structure.StructureType'}}:</label>
          <input name="system.structureType" type="text" value="{{system.structureType}}" placeholder="例如，堡垒，村庄，森林" />
        </div>
        <div class="form-group">
          <label>建筑类型:</label>
          <input name="system.buildingType" type="text" value="{{system.buildingType}}" placeholder="例如，城堡，寺庙，瞭望塔" />
        </div>
      </div>
      
      <div class="form-group">
        <label>{{localize 'battlefield-system.Sheet.Structure.Description'}}:</label>
        <div id="description-editor" class="editor-content" data-field="description">{{{system.description}}}</div>
      </div>
      
      <div class="grid grid-2col">
        <div class="form-group">
          <label>{{localize 'battlefield-system.Sheet.Structure.OwnerFaction'}}:</label>
          <input name="system.ownerFaction" type="text" value="{{system.ownerFaction}}" placeholder="阵营名称" />
        </div>
        <div class="form-group">
          <label>{{localize 'battlefield-system.Sheet.Structure.DefenseValue'}}:</label>
          <input name="system.defenseValue" type="number" value="{{system.defenseValue}}" min="0" />
        </div>
      </div>
      
      <div class="form-group checkbox-group">
        <input id="capturable-checkbox" name="system.isCapturable" type="checkbox" class="capturable-checkbox" {{checked system.isCapturable}} />
        <label for="capturable-checkbox">{{localize 'battlefield-system.Sheet.Structure.IsCapturable'}}</label>
      </div>
    </div>

    {{!-- Details Tab --}}
    <div class="tab" data-tab="details">
      <div class="form-group">
        <label>特殊效果:</label>
        <div id="special-effects-editor" class="editor-content" data-field="specialEffects">{{{system.specialEffects}}}</div>
      </div>
      
      <div class="form-group">
        <label>资源产出:</label>
        <textarea name="system.resourceProduction" rows="3" placeholder="例如，每天产出10单位食物">{{system.resourceProduction}}</textarea>
      </div>
    </div>

    {{!-- Status Tab --}}
    <div class="tab" data-tab="status">
      <div class="status-effects">
        <div class="status-header">
          <h3>{{localize 'battlefield-system.Sheet.Structure.StatusEffects'}}</h3>
          <button type="button" class="add-status-btn" data-action="create-status">
            <i class="fas fa-plus"></i> 添加状态
          </button>
        </div>
        
        {{!-- 状态列表 --}}
        <div class="status-list">
          {{#each statusEffects as |status|}}
          <div class="status-item">
            <div class="status-header">
              <div class="status-info">
                <img src="{{status.icon}}" alt="{{status.name}}" title="{{status.name}}" class="status-icon" />
                <input type="text" class="status-name" value="{{status.name}}" data-status-id="{{status.id}}" placeholder="状态名称" />
              </div>
              <button type="button" class="remove-status" data-status-id="{{status.id}}">
                <i class="fas fa-times"></i>
              </button>
            </div>
            <div class="status-description">
              <textarea class="status-description-input" data-status-id="{{status.id}}" placeholder="输入状态描述...">{{status.system.description}}</textarea>
            </div>
          </div>
          {{/each}}
          {{#unless statusEffects.length}}
          <div class="no-status">
            <p>暂无状态。点击上方"添加状态"按钮创建第一个状态。</p>
          </div>
          {{/unless}}
        </div>
      </div>
    </div>
  </section>
</form>